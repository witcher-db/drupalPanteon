<?xml version="1.0"?>
<ruleset>
  <description>Strict coding standards for Drupal projects.</description>
  <arg name="extensions" value="php,inc,module,install,theme,profile,engine,md,yml"/>
  <file>./web/modules</file>
  <file>./web/themes</file>
  <file>./web/profiles</file>
  <exclude-pattern>*/vendor/*</exclude-pattern>
  <exclude-pattern>*/node_modules/*</exclude-pattern>
  <exclude-pattern>*/.gitlab-ci-local/*</exclude-pattern>
  <exclude-pattern>./web/modules/contrib/</exclude-pattern>
  <exclude-pattern>./web/themes/contrib/</exclude-pattern>
  <exclude-pattern>./web/profiles/contrib/</exclude-pattern>

  <!-- Default rules. -->
  <rule ref="Drupal"/>
  <rule ref="DrupalPractice"/>

  <!-- Require nullable types to be declared as such. -->
  <rule ref="SlevomatCodingStandard.TypeHints.NullableTypeForNullDefaultValue"/>

  <!-- Forbid annotations which are not included in the Drupal coding standard but are often added by IDEs. -->
  <rule ref="SlevomatCodingStandard.Commenting.ForbiddenAnnotations">
    <properties>
      <property name="forbiddenAnnotations" type="array">
        <element value="@author"/>
        <element value="@created"/>
        <element value="@copyright"/>
        <element value="@license"/>
        <element value="@package"/>
        <element value="@version"/>
      </property>
    </properties>
  </rule>

  <!-- Forbid documentation auto-generated by IDEs which does not align with the Drupal documentation standards. -->
  <rule ref="SlevomatCodingStandard.Commenting.ForbiddenComments">
    <properties>
      <property name="forbiddenCommentPatterns" type="array">
        <element value="/@inheritDoc/"/>
        <element value="/^Class [a-zA-z]*\.$/"/>
        <element value="/^Interface [a-zA-z]*\.$/"/>
        <element value="/^[a-zA-z]* constructor\.$/"/>
      </property>
    </properties>
  </rule>

  <!-- Enforce correct formatting of return types hints. -->
  <rule ref="SlevomatCodingStandard.TypeHints.ReturnTypeHintSpacing"/>

  <!-- Enforce using single quotes for strings. -->
  <rule ref="Squiz.Strings.DoubleQuoteUsage.NotRequired"/>
</ruleset>
